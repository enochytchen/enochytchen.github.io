-------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/yitche/My_Website/content/courses/biostatbasics/excercise/exercise1/Log
> /exercise2_20210201.log
  log type:  text
 opened on:   1 Feb 2021, 15:54:11

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. clear all

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. pwd 
/Users/yitche/My_Website/content/courses/biostatbasics/excercise/exercise1/Data

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. use sphc_all, clear

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. //Â Give them id
. gen id = _n

. 
end of do-file

. list if id <2

       +-------------------------------------------------------------------------------+
    1. | seikl | halk02 | kon | flandgr | ghq12302 | utb302 | aldkl4 | aldkl7  | f302  |
       |     4 |      . |   2 |       1 |        0 |      . |      4 |      7  |    4  |
       |-------+--------------+--------------------------------------------------------|
       | f3a02 | f3b02 | f402 | f502 | f6a02 | bmi2402  | bmi2502  | bmi3002  | f2902  |
       |     1 |     1 |    1 |    0 |     0 |       0  |       1  |       0  |     0  |
       |-----------------------------------------------------------+-------------------|
       | f52a02 | f52b02 | f52c02 | f52d02 | f5602 | f5902 | f7502 | argang | omrade06 |
       |      1 |      0 |      0 |      0 |     1 |     1 |     0 |   2002 |       16 |
       |-------------------------------------------------------------------------------|
       |    dagrok     |    trok02     |    dagsnus     |     tsnus02     |     id     |
       |         0     |         1     |          0     |           0     |      1     |
       +-------------------------------------------------------------------------------+

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. label data "Stockholm Public Health Cohort 2002, 2006, 2010" 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. describe

Contains data from sphc_all.dta
  obs:        95,686                          Stockholm Public Health Cohort 2002, 2006,
                                                2010
 vars:            32                          28 Jan 2021 16:12
-------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------
seikl           byte    %10.0g                seikl
halk02          byte    %10.0g                halk02
kon             byte    %10.0g                kon
flandgr         byte    %10.0g                flandgr
ghq12302        byte    %10.0g                ghq12302
utb302          byte    %10.0g                utb302
aldkl4          byte    %10.0g                aldkl4
aldkl7          byte    %10.0g                aldkl7
f302            byte    %10.0g                f302
f3a02           byte    %10.0g                f3a02
f3b02           byte    %10.0g                f3b02
f402            byte    %10.0g                f402
f502            byte    %10.0g                f502
f6a02           byte    %10.0g                f6a02
bmi2402         byte    %10.0g                bmi2402
bmi2502         byte    %10.0g                bmi2502
bmi3002         byte    %10.0g                bmi3002
f2902           byte    %10.0g                f2902
f52a02          byte    %10.0g                f52a02
f52b02          byte    %10.0g                f52b02
f52c02          byte    %10.0g                f52c02
f52d02          byte    %10.0g                f52d02
f5602           byte    %10.0g                f5602
f5902           byte    %10.0g                f5902
f7502           byte    %10.0g                f7502
argang          int     %10.0g                argang
omrade06        byte    %10.0g                omrade06
dagrok          byte    %10.0g                dagrok
trok02          byte    %10.0g                trok02
dagsnus         byte    %10.0g                dagsnus
tsnus02         byte    %10.0g                tsnus02
id              float   %9.0g                 
-------------------------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. 
end of do-file

. de

Contains data from sphc_all.dta
  obs:        95,686                          Stockholm Public Health Cohort 2002, 2006,
                                                2010
 vars:            32                          28 Jan 2021 16:12
-------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------
seikl           byte    %10.0g                seikl
halk02          byte    %10.0g                halk02
kon             byte    %10.0g                kon
flandgr         byte    %10.0g                flandgr
ghq12302        byte    %10.0g                ghq12302
utb302          byte    %10.0g                utb302
aldkl4          byte    %10.0g                aldkl4
aldkl7          byte    %10.0g                aldkl7
f302            byte    %10.0g                f302
f3a02           byte    %10.0g                f3a02
f3b02           byte    %10.0g                f3b02
f402            byte    %10.0g                f402
f502            byte    %10.0g                f502
f6a02           byte    %10.0g                f6a02
bmi2402         byte    %10.0g                bmi2402
bmi2502         byte    %10.0g                bmi2502
bmi3002         byte    %10.0g                bmi3002
f2902           byte    %10.0g                f2902
f52a02          byte    %10.0g                f52a02
f52b02          byte    %10.0g                f52b02
f52c02          byte    %10.0g                f52c02
f52d02          byte    %10.0g                f52d02
f5602           byte    %10.0g                f5602
f5902           byte    %10.0g                f5902
f7502           byte    %10.0g                f7502
argang          int     %10.0g                argang
omrade06        byte    %10.0g                omrade06
dagrok          byte    %10.0g                dagrok
trok02          byte    %10.0g                trok02
dagsnus         byte    %10.0g                dagsnus
tsnus02         byte    %10.0g                tsnus02
id              float   %9.0g                 
-------------------------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. des

Contains data from sphc_all.dta
  obs:        95,686                          Stockholm Public Health Cohort 2002, 2006,
                                                2010
 vars:            32                          28 Jan 2021 16:12
-------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------
seikl           byte    %10.0g                seikl
halk02          byte    %10.0g                halk02
kon             byte    %10.0g                kon
flandgr         byte    %10.0g                flandgr
ghq12302        byte    %10.0g                ghq12302
utb302          byte    %10.0g                utb302
aldkl4          byte    %10.0g                aldkl4
aldkl7          byte    %10.0g                aldkl7
f302            byte    %10.0g                f302
f3a02           byte    %10.0g                f3a02
f3b02           byte    %10.0g                f3b02
f402            byte    %10.0g                f402
f502            byte    %10.0g                f502
f6a02           byte    %10.0g                f6a02
bmi2402         byte    %10.0g                bmi2402
bmi2502         byte    %10.0g                bmi2502
bmi3002         byte    %10.0g                bmi3002
f2902           byte    %10.0g                f2902
f52a02          byte    %10.0g                f52a02
f52b02          byte    %10.0g                f52b02
f52c02          byte    %10.0g                f52c02
f52d02          byte    %10.0g                f52d02
f5602           byte    %10.0g                f5602
f5902           byte    %10.0g                f5902
f7502           byte    %10.0g                f7502
argang          int     %10.0g                argang
omrade06        byte    %10.0g                omrade06
dagrok          byte    %10.0g                dagrok
trok02          byte    %10.0g                trok02
dagsnus         byte    %10.0g                dagsnus
tsnus02         byte    %10.0g                tsnus02
id              float   %9.0g                 
-------------------------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. // 1.2 Rename variables 
. rename kon sex

. rename aldkl4 agegrp4

. rename f302 srh

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. label variable sex sex

. label variable agegrp4 agegrp4

. label variable srh srh

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. label define sex_lab 1 "man" 2 "woman"

. label values sex sex_lab

. 
. label define agegrp4_lab 1 "18-29" 2 "30-44" 3 "45-64" 4 "65-84"

. label values agegrp4 agegrp4_lab

. 
. label define srh_lab 1 "Excellent" 2 "Good" 3 "Average" 4 "Poor" 5 "Very poor"

. label values srh srh_lab

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab sex // Looks okay

        sex |      Freq.     Percent        Cum.
------------+-----------------------------------
        man |     43,196       45.17       45.17
      woman |     52,433       54.83      100.00
------------+-----------------------------------
      Total |     95,629      100.00

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. gen female = 1 if sex == 2
(43,253 missing values generated)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. replace female = 0 if sex == 1
(43,196 real changes made)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab female sex // Check you successfully gen or not

           |          sex
    female |       man      woman |     Total
-----------+----------------------+----------
         0 |    43,196          0 |    43,196 
         1 |         0     52,433 |    52,433 
-----------+----------------------+----------
     Total |    43,196     52,433 |    95,629 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. codebook agegrp4

-------------------------------------------------------------------------------------------
agegrp4                                                                             agegrp4
-------------------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  agegrp4_lab

                 range:  [1,4]                        units:  1
         unique values:  4                        missing .:  57/95,686

            tabulation:  Freq.   Numeric  Label
                        14,513         1  18-29
                        27,078         2  30-44
                        34,399         3  45-64
                        19,639         4  65-84
                            57         .  

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab agegrp4, gen(agegrp_dum)

    agegrp4 |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-29 |     14,513       15.18       15.18
      30-44 |     27,078       28.32       43.49
      45-64 |     34,399       35.97       79.46
      65-84 |     19,639       20.54      100.00
------------+-----------------------------------
      Total |     95,629      100.00

. 
end of do-file

. list agegrp4 agegrp_dum* if id == 1

       +-----------------------------------------------------+
       | agegrp4   agegrp~1   agegrp~2   agegrp~3   agegr~m4 |
       |-----------------------------------------------------|
    1. |   65-84          0          0          0          1 |
       +-----------------------------------------------------+

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. gen nsrh = 1 if srh == 5
(94,887 missing values generated)

. replace nsrh = 2 if srh == 4
(4,322 real changes made)

. replace nsrh = 3 if srh == 3
(21,379 real changes made)

. replace nsrh = 4 if srh == 2
(46,962 real changes made)

. replace nsrh = 5 if srh == 1
(20,893 real changes made)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. /*Bonus: Use forvalues */
. capture drop nsrh

. 
. forvalues i = 1/5 {
  2.         if `i' == 1{
  3.                 gen nsrh = `i'  if srh == 6-`i'
  4.         }
  5.         
.         else{
  6.                 replace nsrh = `i' if srh == 6-`i'              
  7.         }
  8. }
(94,887 missing values generated)
(4,322 real changes made)
(21,379 real changes made)
(46,962 real changes made)
(20,893 real changes made)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. /*Bonus to me: Use recode (I learned from you guys!)*/
. capture drop nsrh

. recode srh (5=1) (4=2) (3=3) (2=4) (1=5), gen(nsrh)
(72976 differences between srh and nsrh)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. // Label again
. label define nsrh_lab 1 "Very poor" 2 "Poor" 3 "Average" 4 "Good" 5 "Excellent"

. label values nsrh nsrh_lab

. 
. // Add numeric values back to the variables
. numlabel, add

. 
. // Check
. tab srh nsrh

             |                  RECODE of srh (srh)
         srh | 1. Very p    2. Poor  3. Averag    4. Good  5. Excell |     Total
-------------+-------------------------------------------------------+----------
1. Excellent |         0          0          0          0     20,893 |    20,893 
     2. Good |         0          0          0     46,962          0 |    46,962 
  3. Average |         0          0     21,379          0          0 |    21,379 
     4. Poor |         0      4,322          0          0          0 |     4,322 
5. Very poor |       799          0          0          0          0 |       799 
-------------+-------------------------------------------------------+----------
       Total |       799      4,322     21,379     46,962     20,893 |    94,355 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. save sphc_all_exercise2, replace 
file sphc_all_exercise2.dta saved

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. clear all

. use sphc_all_exercise2, clear
(Stockholm Public Health Cohort 2002, 2006, 2010)

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. des

Contains data from sphc_all_exercise2.dta
  obs:        95,686                          Stockholm Public Health Cohort 2002, 2006,
                                                2010
 vars:            38                          1 Feb 2021 16:09
-------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------------
seikl           byte    %10.0g                seikl
halk02          byte    %10.0g                halk02
sex             byte    %10.0g     sex_lab    sex
flandgr         byte    %10.0g                flandgr
ghq12302        byte    %10.0g                ghq12302
utb302          byte    %10.0g                utb302
agegrp4         byte    %10.0g     agegrp4_lab
                                              agegrp4
aldkl7          byte    %10.0g                aldkl7
srh             byte    %12.0g     srh_lab    srh
f3a02           byte    %10.0g                f3a02
f3b02           byte    %10.0g                f3b02
f402            byte    %10.0g                f402
f502            byte    %10.0g                f502
f6a02           byte    %10.0g                f6a02
bmi2402         byte    %10.0g                bmi2402
bmi2502         byte    %10.0g                bmi2502
bmi3002         byte    %10.0g                bmi3002
f2902           byte    %10.0g                f2902
f52a02          byte    %10.0g                f52a02
f52b02          byte    %10.0g                f52b02
f52c02          byte    %10.0g                f52c02
f52d02          byte    %10.0g                f52d02
f5602           byte    %10.0g                f5602
f5902           byte    %10.0g                f5902
f7502           byte    %10.0g                f7502
argang          int     %10.0g                argang
omrade06        byte    %10.0g                omrade06
dagrok          byte    %10.0g                dagrok
trok02          byte    %10.0g                trok02
dagsnus         byte    %10.0g                dagsnus
tsnus02         byte    %10.0g                tsnus02
id              float   %9.0g                 
female          float   %9.0g                 
agegrp_dum1     byte    %8.0g                 agegrp4==18-29
agegrp_dum2     byte    %8.0g                 agegrp4==30-44
agegrp_dum3     byte    %8.0g                 agegrp4==45-64
agegrp_dum4     byte    %8.0g                 agegrp4==65-84
nsrh            byte    %12.0g     nsrh_lab   RECODE of srh (srh)
-------------------------------------------------------------------------------------------
Sorted by: 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tabstat srh, s(count mean sd var median min max range)

    variable |         N      mean        sd  variance       p50       min       max
-------------+----------------------------------------------------------------------
         srh |     94355  2.122166  .8321827   .692528         2         1         5
------------------------------------------------------------------------------------

    variable |     range
-------------+----------
         srh |         4
------------------------

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab f52a02

     f52a02 |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     51,864       72.94       72.94
          1 |     19,239       27.06      100.00
------------+-----------------------------------
      Total |     71,103      100.00

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. lab var f52a02 alone

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab f52a02 agegrp4

           |                   agegrp4
     alone |  1. 18-29   2. 30-44   3. 45-64   4. 65-84 |     Total
-----------+--------------------------------------------+----------
         0 |     7,809     15,661     19,082      9,312 |    51,864 
         1 |     2,747      3,534      6,189      6,769 |    19,239 
-----------+--------------------------------------------+----------
     Total |    10,556     19,195     25,271     16,081 |    71,103 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab f52a02 agegrp4, col 

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |                   agegrp4
     alone |  1. 18-29   2. 30-44   3. 45-64   4. 65-84 |     Total
-----------+--------------------------------------------+----------
         0 |     7,809     15,661     19,082      9,312 |    51,864 
           |     73.98      81.59      75.51      57.91 |     72.94 
-----------+--------------------------------------------+----------
         1 |     2,747      3,534      6,189      6,769 |    19,239 
           |     26.02      18.41      24.49      42.09 |     27.06 
-----------+--------------------------------------------+----------
     Total |    10,556     19,195     25,271     16,081 |    71,103 
           |    100.00     100.00     100.00     100.00 |    100.00 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab f52a02 agegrp4, row 

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

           |                   agegrp4
     alone |  1. 18-29   2. 30-44   3. 45-64   4. 65-84 |     Total
-----------+--------------------------------------------+----------
         0 |     7,809     15,661     19,082      9,312 |    51,864 
           |     15.06      30.20      36.79      17.95 |    100.00 
-----------+--------------------------------------------+----------
         1 |     2,747      3,534      6,189      6,769 |    19,239 
           |     14.28      18.37      32.17      35.18 |    100.00 
-----------+--------------------------------------------+----------
     Total |    10,556     19,195     25,271     16,081 |    71,103 
           |     14.85      27.00      35.54      22.62 |    100.00 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab f52a02 agegrp4, col 

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |                   agegrp4
     alone |  1. 18-29   2. 30-44   3. 45-64   4. 65-84 |     Total
-----------+--------------------------------------------+----------
         0 |     7,809     15,661     19,082      9,312 |    51,864 
           |     73.98      81.59      75.51      57.91 |     72.94 
-----------+--------------------------------------------+----------
         1 |     2,747      3,534      6,189      6,769 |    19,239 
           |     26.02      18.41      24.49      42.09 |     27.06 
-----------+--------------------------------------------+----------
     Total |    10,556     19,195     25,271     16,081 |    71,103 
           |    100.00     100.00     100.00     100.00 |    100.00 

. 
end of do-file

. do "/var/folders/_9/lhjg660s4psdlb1xk2tj7c0x96f25w/T//SD04789.000000"

. tab female argang, col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |              argang
    female |      2002       2006       2010 |     Total
-----------+---------------------------------+----------
         0 |    14,116     15,623     13,457 |    43,196 
           |     45.35      45.01      45.16 |     45.17 
-----------+---------------------------------+----------
         1 |    17,009     19,084     16,340 |    52,433 
           |     54.65      54.99      54.84 |     54.83 
-----------+---------------------------------+----------
     Total |    31,125     34,707     29,797 |    95,629 
           |    100.00     100.00     100.00 |    100.00 

. 
end of do-file

. exit, clear
